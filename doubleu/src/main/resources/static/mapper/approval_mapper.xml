<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.doubleu.approval.mybatis.ApprovalMapper">
	<insert id="insert" parameterType="com.doubleu.approval.vo.ApprovalFormVo">
		INSERT ALL 
		INTO approval_form(form_no, drafter_name, form_date, drafter_department, form_title, form_doc, form_type, cooperation_department, event_date, drafter_position) 
		VALUES(seq_approval_form.nextval, '${drafterName}', SYSDATE, '${drafterDepartment}', '${formTitle}', '${formDoc}', '${formType}', '${cooperationDepartment}', TO_DATE('${eventDate}', 'YYYY-MM-DD'), '${drafterPosition}')
		<choose>
		<when test= "formType == '품의서' or formType == '구매품의서'">
			INTO approval_form_petition(form_no, form_purpose, budget) 
			VALUES (seq_approval_form.currval, '${formPetition.formPurpose}', '${formPetition.budget}')
		</when>
		<when test="formType == '휴가신청서'">
		
		
		</when>

		</choose>
		SELECT * FROM dual
		
	</insert>
</mapper>